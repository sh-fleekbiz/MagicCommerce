#!/usr/bin/env bash
# ============================================================================== 
# Magicommerce: Canonical Environment Schema (Shared Resources)
# ============================================================================== 

# --- App Identity ---
APP_NAME=magicommerce
APP_ENV=dev
APP_BASE_URL=http://localhost:3000
LOG_LEVEL=info

# --- Azure OpenAI (rg-shared-ai / shared-openai-eastus2) ---
AZURE_OPENAI_ENDPOINT=https://shared-openai-eastus2.openai.azure.com/
AZURE_OPENAI_RESOURCE=shared-openai-eastus2
AZURE_OPENAI_API_VERSION=2025-01-01-preview
# Standardized deployment names (shared across all portfolio apps)
AZURE_OPENAI_CHAT_DEPLOYMENT=gpt-5.1-mini
AZURE_OPENAI_EMBEDDING_DEPLOYMENT=text-embedding-3-small
AZURE_OPENAI_IMAGE_DEPLOYMENT=gpt-image-1-mini
# Legacy env var names (deprecated, use above)
AZURE_OPENAI_DEPLOYMENT_CHAT=gpt-5.1-mini
AZURE_OPENAI_DEPLOYMENT_EMBEDDING=text-embedding-3-small
AZURE_OPENAI_DEPLOYMENT_VISION=gpt-image-1-mini
AZURE_OPENAI_API_KEY= # set via .env.local, GitHub Secret, Azure App Config

# --- Azure AI Search (shared-search-standard-eastus2) ---
AZURE_SEARCH_ENDPOINT=https://shared-search-standard-eastus2.search.windows.net
AZURE_SEARCH_API_KEY=
AZURE_SEARCH_INDEX_NAME_PRODUCTS=magicommerce-products

# --- Database (pg-shared-apps-eastus2) ---
DATABASE_URL=postgresql://<user>:<pass>@pg-shared-apps-eastus2.postgres.database.azure.com:5432/magicommerce?sslmode=require

# --- Storage (stmahumsharedapps) ---
AZURE_STORAGE_CONNECTION_STRING=
APP_BLOB_CONTAINER=magicommerce-assets

# --- Auth / Next.js ---
NEXTAUTH_URL=http://localhost:3000
NEXTAUTH_SECRET=dev-only-secret

# --- Enhanced AI Feature Flags ---
NEXT_PUBLIC_FEATURE_AI_CHAT=true
NEXT_PUBLIC_FEATURE_AI_SEARCH=true
NEXT_PUBLIC_FEATURE_AI_PRODUCT_QNA=true
NEXT_PUBLIC_FEATURE_VECTOR_SEARCH=true
NEXT_PUBLIC_FEATURE_ENHANCED_RECOMMENDATIONS=true
NEXT_PUBLIC_FEATURE_VISUAL_SEARCH=true
